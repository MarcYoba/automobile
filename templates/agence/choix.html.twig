{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}

<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="AB COMPTA - Services comptables">
    <meta name="author" content="AB COMPTA">
    
    <title>Location - AB COMPTA</title>
    
    <!-- Styles CSS (à ajouter) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <style>
        .theme-accent-color {
            color: #007bff; /* Couleur d'accentuation bleue */
        }
        
        .top-border-me {
            border-top: 3px solid #007bff;
            padding-top: 2rem;
        }
        
        .thin-hr {
            width: 50px;
            border-top: 2px solid #007bff;
            margin: 1rem auto;
        }
        
        .regular-navigation {
            padding-top: 80px; /* Pour compenser la navbar fixe */
        }
        
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .card {
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        #back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: none;
            z-index: 99;
        }
    </style>
</head>

<body id="page-top" class="regular-navigation">
    <div class="master-wrapper">
        <!-- Préchargeur -->
        <div class="preloader">
            <div class="preloader-img">
                <!-- Animation de chargement (optionnelle) -->
            </div>
        </div>

        <!-- Navigation Bootstrap 5 -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top wow animate__animated animate__fadeInDown" data-wow-delay="0.2s">
            <div class="container">
                <!-- Logo et nom de l'entreprise -->
                <a class="navbar-brand smoothie" href="index.php">
                    AB COMPTA<span class="theme-accent-color"></span>
                </a>
                
                <!-- Bouton toggle pour mobile -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main-navigation" 
                        aria-controls="main-navigation" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Menu de navigation -->
                <div class="collapse navbar-collapse" id="main-navigation">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <!-- Éléments de navigation à ajouter ici -->
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Section principale -->
        <section id="about" class="top-border-me">
            <div class="section-inner">
                <div class="container">
                    <div class="row align-items-center">
                        <!-- En-tête de section -->
                        <div class="col-lg-6 text-center mb-5">                        
                            <h2 class="section-heading">WE <span class="theme-accent-color">are</span> Welcome</h2>
                            <hr class="thin-hr">
                            <h3 class="section-subheading secondary-font">Nous sommes très heureux de vous voir.</h3>
                        </div>
                        
                        <!-- Flèche décorative -->
                        <div class="col-lg-2 text-center mb-5">
                            <i class="fas fa-arrow-right fa-5x theme-accent-color"></i>
                        </div>
                        
                        <!-- Contenu conditionnel selon le rôle utilisateur -->
                        <div class="col-lg-12">
                            {% if app.user %}
                                <div class="form-group row g-4">
                                    {% if is_granted('ROLE_ADMIN_ADMIN') or is_granted('ROLE_DIRECTEUR_GENERALE') %}
                                        <!-- Panneau d'administration -->
                                        <div class="col-6">
                                            <div class="card shadow-sm border-0">
                                                <div class="card-body text-center p-4">
                                                    <i class="fas fa-home fa-3x mb-3 theme-accent-color"></i>
                                                    <h5 class="card-title fw-bold">Direction Générale</h5>
                                                    <p class="card-text text-muted mb-4">Bienvenue dans votre agence. Veuillez accéder à vos services.</p>
                                                    <div class="d-flex gap-3 justify-content-center flex-wrap">
                                                        <a href="{{ path('app_home_dashboard', {'id': 0}) }}" class="btn btn-primary px-4">
                                                            Activite ENC
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Liste des agences pour l'admin -->
                                        {% for agences in agence %}
                                        <div class="col-md-6 col-lg-4">
                                            <div class="card shadow-sm border-0 h-100">
                                                <div class="card-body text-center p-4 d-flex flex-column">
                                                    <i class="fas fa-building fa-3x mb-3 theme-accent-color"></i>
                                                    <h5 class="card-title fw-bold">{{ agences.nom }}</h5>
                                                    <p class="card-text text-muted mb-4 flex-grow-1">Bienvenue dans votre agence. Veuillez accéder à vos services.</p>
                                                    <div class="d-flex gap-2 justify-content-center flex-wrap">
                                                        <a href="{{ path('app_home_dashboard', {'id': agences.id}) }}" class="btn btn-primary btn-sm">
                                                            Activite ENC
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    
                                    {% elseif is_granted('ROLE_CLIENTS') %}
                                        <!-- Interface client -->
                                        {% if app.user.employer is not empty %}
                                        <div class="col-6">
                                            <div class="card shadow-sm border-0">
                                                <div class="card-body text-center p-4">
                                                    <i class="fas fa-building fa-3x mb-3 theme-accent-color"></i>
                                                    <h5 class="card-title fw-bold">{{ app.user.employer.agence.nom }}</h5>
                                                    <p class="card-text text-muted mb-4">Bienvenue dans votre agence. Veuillez accéder à vos services.</p>
                                                    <div class="d-flex gap-3 justify-content-center flex-wrap">
                                                        <a href="{{ path('app_home_dashboard', {'id': app.user.employer.agence.id}) }}" class="btn btn-primary px-4">
                                                            Activite ENC
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% else %}
                                        <div class="col-12">
                                            <div class="alert alert-warning text-center">
                                                <p class="mb-0">Vous êtes un client. Veuillez vous référer à votre zone de travail.</p>
                                            </div>
                                        </div>
                                        {% endif %}
                                    
                                    {% elseif is_granted('ROLE_EMPLOYER')  or is_granted('ROLE_MANAGER') or is_granted('ROLE_CAISSIER') or is_granted('ROLE_COMPTABLE') or is_granted('ROLE_SECRETAIRE') %}
                                        <!-- Interface employé avec accès aux agences -->
                                        {% for agences in agence %}
                                        <div class="col-md-6 col-lg-4">
                                            <div class="card shadow-sm border-0 h-100">
                                                <div class="card-body text-center p-4 d-flex flex-column">
                                                    <i class="fas fa-building fa-3x mb-3 theme-accent-color"></i>
                                                    <h5 class="card-title fw-bold">{{ agences.nom }}</h5>
                                                    <p class="card-text text-muted mb-4 flex-grow-1">Bienvenue dans votre agence. Veuillez accéder à vos services.</p>
                                                    <div class="d-flex gap-2 justify-content-center flex-wrap">
                                                        {% if agences.nom == "LTN SARL" %}
                                                            <a href="{{ path('app_home_dashboard', {'id': agences.id}) }}" class="btn btn-primary btn-sm">
                                                                Activite ENC
                                                            </a>
                                                        {% else %}
                                                            <a href="{{ path('app_home_dashboard', {'id': agences.id}) }}" class="btn btn-primary btn-sm">
                                                                Activite ENC
                                                            </a>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    
                                    {% else %}
                                        <!-- Message pour utilisateur non reconnu -->
                                        <div class="col-12">
                                            <div class="alert alert-info text-center">
                                                <p class="mb-0">Vous êtes qui ? Veuillez vous référer à votre zone de travail.</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pied de page -->
        <div id="bottom-frame"></div>

        <!-- Bouton retour en haut -->
        <a href="#" id="back-to-top" class="btn btn-primary rounded-circle p-3">
            <i class="fas fa-arrow-up"></i>
        </a>
    </div>

    <!-- Scripts JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    
    <script>
        // Initialisation de WOW.js pour les animations
        new WOW().init();
        
        // Masquer le préchargeur une fois la page chargée
        window.addEventListener('load', function() {
            document.querySelector('.preloader').style.display = 'none';
        });
        
        // Bouton retour en haut
        const backToTopButton = document.getElementById('back-to-top');
        
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        });
        
        backToTopButton.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>


{% endblock %}
{% block javascripts %}
  {{ parent() }}
  
{% endblock %}